/* Base styles and CSS reset */
:root {
    /* Light theme variables */
    --primary-color: #0073e6;
    --primary-dark: #005bb5;
    --text-color: #333;
    --background-color: #f8f8f8;
    --border-color: #e5e5e5;
    --header-bg: #333;
    --header-text: #fff;
    --loading-overlay: rgba(0, 0, 0, 0.5);
    --card-background: #fff;
    --table-background: #fff;
    --table-hover-background: #f8f8f8;
    --table-border-color: #e5e5e5;
    --input-background: #fff;
    --heading-color: #333;

    /* Modern UI alias tokens */
    --bg: var(--background-color);
    --text: var(--text-color);
    --border-muted: var(--border-color);
    --bg-soft: var(--card-background);
    --footer-bg: var(--header-bg);
    
    /* Material Design sidebar variables */
    --sidebar-width: 280px;
    --sidebar-bg: #ffffff;
    --sidebar-text: #333333;
    --sidebar-text-secondary: #666666;
    --sidebar-active-bg: rgba(0, 115, 230, 0.12);
    --sidebar-active-text: #0073e6;
    --sidebar-hover-bg: rgba(0, 0, 0, 0.04);
    --sidebar-border: #e0e0e0;
    --sidebar-shadow: 0 2px 4px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
    --sidebar-elevation: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
    
    /* Standardized z-index hierarchy */
    --z-content: 1;          /* Normal content */
    --z-navigation: 25;      /* Header and navigation */
    --z-sidebar: 30;         /* Left sidebar navigation */
    --z-overlay: 40;         /* Overlay backgrounds */
    --z-sidebar-panel: 45;   /* Right sidebar panels */
    --z-dropdowns: 50;       /* Dropdown menus */
    --z-modals: 100;         /* Modal dialogs */
}

[data-theme="light"] {
    /* Light theme specific overrides */
    --header-bg: #ffffff !important;
    --header-text: #333333 !important;
}

[data-theme="dark"] {
    /* Dark theme variables with improved contrast */
    --background-color: #121212;
    --text-color: #ffffff;
    --heading-color: #ffffff;
    --card-background: #1e1e1e;
    --border-color: #404040;
    --table-background: #1e1e1e;
    --table-hover-background: #2d2d2d;
    --table-border-color: #404040;
    --input-background: #2d2d2d;
    --header-bg: #000000 !important;
    --header-text: #ffffff !important;
}

[data-theme="dark-blue"] {
    /* Dark Blue theme with gradient background */
    --text-color: #ffffff;
    --background-color: #0a192f;
    --border-color: #1e3a5f;
    --header-bg: #0d1b2a;
    --header-text: #ffffff;
    --loading-overlay: rgba(0, 0, 0, 0.7);
    --card-background: rgba(15, 30, 55, 0.8);
    --table-background: rgba(15, 30, 55, 0.9);
    --table-hover-background: rgba(30, 50, 80, 0.9);
    --table-border-color: #1e3a5f;
    --input-background: rgba(20, 40, 70, 0.8);
    --heading-color: #ffffff;
    
    /* Gradient backgrounds */
    --bg-gradient-start: #0a192f;
    --bg-gradient-mid: #0d1b2a;
    --bg-gradient-end: #000000;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Typography */
html, body {
    min-height: 100vh;
    margin: 0;
    padding: 0;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: var(--text-color);
    background: var(--background-color);
    transition: background-color 0.3s ease, color 0.3s ease;
    display: flex;
    flex-direction: column;
}

main {
    flex: 1;
    min-height: 100%;
    background: var(--background-color);
}

/* Layout */
/* Header styles are now handled by Tailwind classes in HTML */

/* Create shadow effect using pseudo-element that appears on scroll */
header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    background: rgba(51, 51, 51, 0.95);
    opacity: 0;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    z-index: -1;
}

/* Modern browsers with :has() support - CSS-only shadow effect */
@supports selector(:has(*)) {
    /* Show shadow when header is not at the top */
    body:not(:has(main:first-child)) header::before,
    body:has(main) header::before {
        opacity: 1;
    }
    
    /* Alternative approach using scroll-driven animations */
    @supports (animation-timeline: scroll()) {
        header::before {
            animation: fadeShadow linear;
            animation-timeline: scroll(root block);
            animation-range: 0px 100px;
        }
        
        @keyframes fadeShadow {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
    }
}

/* Fallback for browsers without :has() support */
@supports not (selector(:has(*))) {
    /* JavaScript will add .scrolled class */
    header.scrolled::before {
        opacity: 1;
    }
    
    /* Simple hover effect as additional feedback */
    header:hover::before {
        opacity: 0.5;
        transition: opacity 0.3s ease;
    }
}


/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(8px)) {
    header::before {
        background: var(--header-bg);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }
}

/* Theme-specific overrides for header pseudo-element */
[data-theme="dark-blue"] header::before {
    background: rgba(13, 27, 42, 0.95) !important;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3) !important;
}

/* THEME DARK - HEADER NOIR FIXE (override absolu) */
[data-theme="dark"] header,
[data-theme="dark"] header::before,
[data-theme="dark"] header.scrolled,
[data-theme="dark"] header.scrolled::before,
[data-theme="dark"] header:hover,
[data-theme="dark"] header:hover::before {
    background: #000000 !important;
}

[data-theme="light"] header::before {
    background: rgba(255, 255, 255, 0.95) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1) !important;
}

/* General hover effects for header links (all themes) */
header a:hover h1 {
    color: #60a5fa; /* Default blue hover color */
    transition: color 0.2s ease;
}

/* Hover effects for header logo */
header a:hover .header-title {
    color: #60a5fa; /* Default blue hover color */
    transition: color 0.2s ease;
}

header a:hover .header-logo {
    opacity: 0.8;
    transition: opacity 0.2s ease;
}

/* Enhanced hover effects for header links */
header a {
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

header a:focus {
    outline: 2px solid var(--primary-color);
    outline-offset: 2px;
    border-radius: 4px;
}

/* Améliorer le focus outline pour le logo tout en gardant un design épuré */
header a:focus-visible {
    outline: 2px solid var(--primary-color) !important;
    outline-offset: 2px !important;
    border-radius: 4px !important;
}

/* Garder les styles de base pour les autres états */
header a:active,
header a:visited {
    outline: none !important;
    border: none !important;
    box-shadow: none !important;
}

header a:active h1,
header a:visited h1 {
    color: inherit !important;
}

/* Améliorer le focus outline pour tous les éléments interactifs */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    outline: 2px solid var(--primary-color) !important;
    outline-offset: 2px !important;
    border-radius: 4px !important;
}

/* S'assurer que les styles focus ne sont pas supprimés */
button::-moz-focus-inner,
a::-moz-focus-inner {
    border: 0;
}

/* Mobile optimizations for touch targets */
@media (max-width: 768px) {
    header a {
        min-height: 44px;
        min-width: 44px;
        display: flex;
        align-items: center;
    }
    
    header img {
        min-height: 32px;
        min-width: 32px;
    }
    
    /* Améliorer les cibles tactiles pour les boutons */
    button, .sidebar-link {
        min-height: 44px;
        min-width: 44px;
    }
}

/* Header button styles for all themes */
header button {
    color: var(--header-text) !important;
    border-color: var(--header-text) !important;
    background-color: transparent !important;
}

header button:hover {
    opacity: 0.8;
    background-color: rgba(255, 255, 255, 0.1) !important;
}

/* Theme dropdown menu styles */
#theme-menu {
    color: var(--text) !important;
}

#theme-menu a {
    color: var(--text) !important;
}

#theme-menu a:hover {
    background-color: rgba(0, 0, 0, 0.1) !important;
}

/* Light theme specific button fixes */
[data-theme="light"] header button {
    color: #333333 !important;
    border-color: #333333 !important;
}

[data-theme="light"] #theme-menu {
    background: #ffffff !important;
    border: 1px solid #e5e5e5 !important;
}

[data-theme="light"] #theme-menu a {
    color: #333333 !important;
}

[data-theme="light"] #theme-menu a:hover {
    background-color: #f5f5f5 !important;
}

/* Dark theme specific dropdown fixes */
[data-theme="dark"] #theme-menu {
    background: #1e1e1e !important;
    border: 1px solid #404040 !important;
}

[data-theme="dark"] #theme-menu a {
    color: #ffffff !important;
}

[data-theme="dark"] #theme-menu a:hover {
    background-color: #2d2d2d !important;
}

/* Dark Blue theme specific dropdown fixes */
[data-theme="dark-blue"] #theme-menu {
    background: #0d1b2a !important;
    border: 1px solid #1e3a5f !important;
}

[data-theme="dark-blue"] #theme-menu a {
    color: #ffffff !important;
}

[data-theme="dark-blue"] #theme-menu a:hover {
    background-color: #1e3a5f !important;
}

/* Performance optimizations - Strategic will-change usage */
header {
    /* No permanent will-change to avoid GPU overuse */
}

/* Clean up will-change when not needed */
header:not(:hover)::before {
    will-change: auto; /* Reset to auto when not interacting */
}

/* Browser compatibility classes */
.no-has-support header.scrolled::before {
    opacity: 1; /* Fallback for browsers without :has() */
}

.no-backdrop-filter header::before {
    background: var(--header-bg);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
}

.no-scroll-timeline header::before {
    /* Ensure basic opacity transition works */
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Mobile performance optimizations */
@media (max-width: 768px) {
    header::before {
        will-change: auto; /* Disable GPU acceleration on mobile */
        backdrop-filter: none; /* Remove expensive blur effect */
    }
    
    .sidebar-badge-pulse {
        animation: none; /* Disable animations on mobile */
    }
}

/* Reduced performance mode */
.reduced-performance header::before {
    backdrop-filter: none;
    will-change: auto;
    background: var(--header-bg);
}

.reduced-performance .sidebar-badge-pulse {
    animation: none;
}

.reduced-performance * {
    will-change: auto !important;
}

/* Respect user preferences for reduced motion */
@media (prefers-reduced-motion: reduce) {
    header::before {
        will-change: auto !important;
        transition: none !important;
    }
    
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Search Section */
.search-section {
    margin-bottom: 2rem;
}

.search-container {
    max-width: 600px;
    margin: 0 auto;
    display: flex;
    gap: 0.5rem;
}

.search-container input {
    flex: 1;
    padding: 0.75rem;
    border: 2px solid var(--border-color);
    border-radius: 4px;
    font-size: 1rem;
    transition: border-color 0.3s ease;
}

.search-container input:focus {
    border-color: var(--primary-color);
    outline: none;
}

.search-filter {
    max-width: 210px;
}

/* Table Styles */
.table-responsive {
    margin-bottom: 1rem;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

table {
    width: 100%;
    border-collapse: collapse;
    background: white;
}

th, td {
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    text-align: left;
    justify-content:center;
}

th {
    background: #f5f5f5;
    font-weight: 600;
}

tbody tr:hover {
    background: #f8f9fa;
}

.details-button {
    padding: 0.75rem 1.5rem;
    background: #27ae60;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
    width: 100%;
    margin-bottom: 0.25rem;
}

.details-button:hover {
    background: #1f894b;
}

/* Results Section */
.results-section {
    margin-bottom: 2rem;
    background: white;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.results-heading {
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
}

.toggle-icon {
    transition: transform 0.3s ease;
}

.collapsed .toggle-icon {
    transform: rotate(-90deg);
}

.results-content {
    transition: max-height 0.3s ease;
}

.collapsed .results-content {
    max-height: 0;
    overflow: hidden;
}

th[data-sort="index"] {
    min-width: 60px;
}

/* Loading Indicator */
.loading-indicator {
    display: none;
    text-align: center;
    padding: 1rem;
}

.spinner {
    display: inline-block;
    width: 2rem;
    height: 2rem;
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-radius: 50%;
    border-top-color: var(--primary-color);
    animation: spin 1s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Modal Styles */
.modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--loading-overlay);
    z-index: 1000;
}

.modal-overlay.active {
    display: flex;
    justify-content: center;
    align-items: center;
}

.details-container {
    background: white;
    padding: 0.25rem 0.25rem 2rem 3rem;
    border-radius: 4px;
    max-width: 800px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.details-header {
    display: grid;
    grid-template-columns: auto 1fr;
    gap: 2rem;
    margin-bottom: 1.5rem;
}

.details-header img {
    max-width: 200px;
    height: auto;
    border-radius: 4px;
}

.details-info h3 {
    margin-bottom: 1rem;
    color: var(--text-color);
}

.details-info p {
    margin-bottom: 0.5rem;
}

.details-actions {
    display: flex;
    gap: 1rem;
    margin-top: 1.5rem;
    justify-content: flex-end;
}

.details-actions button {
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
}

.details-actions button:first-child {
    background: var(--primary-color);
    color: white;
}

.details-actions button:last-child {
    background: #f5f5f5;
    color: var(--text-color);
}

.details-actions button:hover {
    opacity: 0.9;
}

/* Responsive Design */
@media (max-width: 768px) {
    .search-container {
        flex-direction: column;
    }

    .details-header {
        grid-template-columns: 1fr;
        text-align: center;
    }

    .details-header img {
        margin: 0 auto;
    }

    .details-actions {
        flex-direction: column;
    }
    
    th, td {
        padding: 0.5rem;
        font-size: 0.875rem;
    }
}

/* Accessibility */
.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Status indicators */
.status-queued {
    color: #f39c12;
    font-weight: 600;
    text-align: center;
}

.status-downloading {
    color: #3498db;
    font-weight: 600;
    text-align: center;
}

.status-available {
    color: #27ae60;
    font-weight: 600;
    text-align: center;
}

.status-error {
    color: #e74c3c;
    font-weight: 600;
    text-align: center;
}

.status-done {
    color: black;
    font-weight: 600;
    text-align: center;
}

/* Status table specific styles */
#status-table img {
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

#status-table td {
    vertical-align: middle;
}

.error-message {
    color: #e74c3c;
    text-align: center;
    padding: 1rem !important;
}

/* Dark mode specific styles */
[data-theme="dark"] .uk-card,
[data-theme="dark"] .uk-modal-dialog {
    background-color: var(--card-background);
    color: var(--text-color);
}

[data-theme="dark"] .uk-table {
    color: var(--text-color);
}

[data-theme="dark"] .uk-table-hover tbody tr:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark"] .uk-button-default {
    background-color: var(--card-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

[data-theme="dark"] .uk-search-input {
    background-color: var(--card-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

[data-theme="dark"] .uk-select {
    background-color: var(--card-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* Table styles */
.uk-table {
    background-color: var(--table-background);
    color: var(--text-color);
    border-color: var(--table-border-color);
}

.uk-table th {
    color: var(--text-color);
    background-color: var(--table-background);
    border-bottom-color: var(--table-border-color);
}

.uk-table td {
    color: var(--text-color);
    background-color: var(--table-background);
    border-bottom-color: var(--table-border-color);
}

.uk-table-hover tbody tr:hover,
.uk-table-hover tbody tr:hover td {
    background-color: var(--table-hover-background);
}

/* Input styles */
.uk-search-input,
.uk-input,
.uk-select,
.uk-textarea {
    background-color: var(--input-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* Button styles */
.uk-button-default {
    background-color: var(--card-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

.uk-button-default:hover {
    background-color: var(--table-hover-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* Dropdown styles */
.uk-dropdown {
    background-color: var(--card-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

.uk-dropdown-nav > li > a {
    color: var(--text-color);
}

.uk-dropdown-nav > li > a:hover {
    background-color: var(--table-hover-background);
}

/* Modal styles */
.modal-overlay {
    background-color: rgba(0, 0, 0, 0.5);
}

.details-container {
    background-color: var(--card-background);
    color: var(--text-color);
    border-color: var(--border-color);
}

/* Status colors - ensure they remain visible in dark mode */
.status-downloading {
    color: #4CAF50 !important;
}

.status-available {
    color: #2196F3 !important;
}

.status-error {
    color: #f44336 !important;
}

/* Header specific button styles */
header .uk-button-default {
    color: var(--header-text) !important;
    background-color: transparent;
    border-color: var(--header-text);
}

header .uk-button-default:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: var(--header-text);
    color: var(--header-text) !important;
}

/* Ensure dropdown text is visible when opened */
header .uk-dropdown {
    background-color: var(--card-background);
}

header .uk-dropdown-nav > li > a {
    color: var(--text-color);
}

header .uk-dropdown-nav > li > a:hover {
    color: var(--text-color);
    background-color: var(--table-hover-background);
}

/* Update headings to use heading color */
h1, h2, h3, h4, h5, h6,
.uk-heading-small,
.uk-heading-medium,
.uk-heading-large,
.uk-heading-xlarge,
.uk-heading-2xlarge {
    color: var(--heading-color) !important;
}

/* Ensure accordion titles are visible */
.uk-accordion-title {
    color: var(--heading-color) !important;
}

/* Ensure search results heading is visible */
#results-section-accordion .uk-accordion-title h1 {
    color: var(--heading-color) !important;
}

/* Dark Blue theme specific styles */
[data-theme="dark-blue"] body {
    background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-mid) 50%, var(--bg-gradient-end) 100%);
    background-attachment: fixed;
}

[data-theme="dark-blue"] main {
    background: transparent;
}

/* Glassmorphism effects for dark blue theme */
[data-theme="dark-blue"] .details-container {
    background: var(--card-background);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

[data-theme="dark-blue"] article.rounded.border.p-3.flex.flex-col.gap-3 {
    background: var(--card-background) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
    transition: all 0.3s ease !important;
}

[data-theme="dark-blue"] article.rounded.border.p-3.flex.flex-col.gap-3:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
}

[data-theme="dark-blue"] .p-3.rounded.border.flex.flex-col.gap-2 {
    background: var(--card-background) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 10px !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="dark-blue"] input,
[data-theme="dark-blue"] select {
    border-radius: 8px !important;
    background: var(--input-background) !important;
    backdrop-filter: blur(5px) !important;
    -webkit-backdrop-filter: blur(5px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    transition: all 0.3s ease !important;
}

[data-theme="dark-blue"] input:focus,
[data-theme="dark-blue"] select:focus {
    border-color: var(--primary-color) !important;
    box-shadow: 0 0 0 3px rgba(0, 115, 230, 0.2) !important;
    outline: none !important;
}

[data-theme="dark-blue"] button {
    border-radius: 8px !important;
    transition: all 0.3s ease !important;
}

[data-theme="dark-blue"] button:hover {
    transform: translateY(-1px) !important;
}

[data-theme="dark-blue"] .modal-overlay {
    background: rgba(0, 0, 0, 0.8) !important;
    backdrop-filter: blur(5px) !important;
    -webkit-backdrop-filter: blur(5px) !important;
}

[data-theme="dark-blue"] header {
    background: var(--header-bg) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
}

/* Theme-specific overrides for header pseudo-element */
[data-theme="dark-blue"] header::before {
    background: rgba(13, 27, 42, 0.95) !important;
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3) !important;
}

[data-theme="dark"] header::before {
    background: rgba(18, 18, 18, 0.95) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4) !important;
}

[data-theme="light"] header::before {
    background: rgba(255, 255, 255, 0.95) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1) !important;
}

/* Theme-specific hover color overrides */
[data-theme="dark-blue"] header a:hover h1,
[data-theme="dark-blue"] header a:hover .header-title {
    color: #93c5fd !important;
}

[data-theme="light"] header a:hover h1,
[data-theme="light"] header a:hover .header-title {
    color: #2563eb !important;
}

[data-theme="dark"] header a:hover h1,
[data-theme="dark"] header a:hover .header-title {
    color: #4dabf7 !important;
}

/* Sidebar Panel Styles */
.sidebar-panel-open {
    transform: translateX(0) !important;
}

.sidebar-overlay-active {
    display: block !important;
}

/* Sidebar Badge Styles */
.sidebar-badge-active {
    display: flex !important;
}

.sidebar-badge-downloading {
    background-color: #f59e0b !important; /* Amber for downloading */
}

.sidebar-badge-error {
    background-color: #ef4444 !important; /* Red for errors */
}

/* Responsive Sidebar */
@media (max-width: 640px) {
    #sidebar-panel {
        max-width: 100%;
        width: 100%;
    }
}

/* Animation for badge pulse */
@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

.sidebar-badge-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    will-change: opacity; /* Only for pulsing elements */
}

/* Clean up will-change after animation */
.sidebar-badge-pulse:not(:hover) {
    will-change: auto;
}

/* Apple Books specific styles */
.apple-book-card {
  border: 2px solid rgba(0, 122, 255, 0.3);
  border-radius: 8px;
  transition: all 0.2s ease;
}

.apple-book-card:hover {
  border-color: rgba(0, 122, 255, 0.6);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 122, 255, 0.2);
}

.apple-book-card .mini-cover {
  transition: transform 0.2s ease;
}

.apple-book-card:hover .mini-cover {
  transform: scale(1.05);
}

/* Smooth transitions for sidebar - Optimized performance */
#sidebar-panel {
    /* will-change applied dynamically when needed */
}

#sidebar-panel.sidebar-panel-open {
    will-change: transform; /* Only when open */
}

#sidebar-overlay {
    /* will-change applied dynamically when needed */
}

#sidebar-overlay.sidebar-overlay-active {
    will-change: opacity; /* Only when visible */
    transition: opacity 0.3s ease-in-out;
}

/* Ajuster la hauteur du panel pour qu'il commence sous la topbar */
#sidebar-panel {
    top: 64px; /* Positionné sous la topbar */
    height: calc(100vh - 64px); /* Hauteur adaptée à l'espace restant */
}

/* Mobile adjustments for sidebar panel */
@media (max-width: 768px) {
    #sidebar-panel {
        top: 64px; /* Conserver le positionnement sous la topbar sur mobile */
        height: calc(100vh - 64px); /* Hauteur adaptée sur mobile */
    }
}

/* Custom scrollbar for sidebar content */
#sidebar-panel .overflow-y-auto::-webkit-scrollbar {
    width: 6px;
}

#sidebar-panel .overflow-y-auto::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
}

#sidebar-panel .overflow-y-auto::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.3);
    border-radius: 3px;
}

#sidebar-panel .overflow-y-auto::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.5);
}

/* Reduce flicker with smooth transitions */
#sidebar-status-list {
    transition: opacity 0.2s ease-in-out;
}

#sidebar-status-list.updating {
    opacity: 0.7;
}

/* Smooth progress bar animations */
#sidebar-status-list .h-2.bg-blue-600 {
    transition: width 0.3s ease-in-out;
}

/* Prevent layout shift during updates */
#sidebar-status-list li {
    min-height: 80px;
}

/* Loading state with subtle animation */
@keyframes subtle-pulse {
    0%, 100% {
        opacity: 0.6;
    }
    50% {
        opacity: 0.8;
    }
}

/* Loading state with subtle animation */
#sidebar-status-loading {
    animation: subtle-pulse 1.5s ease-in-out infinite;
}

/* Spin animation for loading buttons */
@keyframes spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

/* Optimistic item styles */
.optimistic-item {
    animation: fadeIn 0.3s ease-in-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 0.7;
        transform: translateY(0);
    }
}

/* Download button states */
button:disabled {
    cursor: not-allowed !important;
    opacity: 0.6 !important;
}

.cursor-not-allowed {
    cursor: not-allowed !important;
}

#sidebar-status-loading {
    animation: subtle-pulse 1.5s ease-in-out infinite;
}

/* View Toggle Buttons */
#view-toggle-container {
    background: var(--bg-soft);
}

.view-toggle {
    color: var(--text);
    transition: all 0.2s ease;
    border-radius: 0;
}

.view-toggle:first-child {
    border-radius: 4px 0 0 4px;
}

.view-toggle:last-child {
    border-radius: 0 4px 4px 0;
}

.view-toggle:hover {
    background: rgba(0, 0, 0, 0.1);
}

.view-toggle.active {
    background: var(--primary-color, #0073e6);
    color: white;
}

/* List View Styles */
#results-container.list-view {
    display: block;
}

/* Table styles for list view */
#results-container.list-view table,
#popular-books-container.list-view table {
    width: 100%;
    border-collapse: collapse;
    background: var(--bg-soft);
    border-radius: 8px;
    overflow: hidden;
}

#results-container.list-view th,
#popular-books-container.list-view th {
    background: var(--bg-soft);
    font-weight: 600;
    text-align: left;
    position: sticky;
    top: 0;
    z-index: 10;
}

#results-container.list-view td,
#popular-books-container.list-view td {
    vertical-align: middle;
}

#results-container.list-view tr:hover,
#popular-books-container.list-view tr:hover {
    background: rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] #results-container.list-view tr:hover,
[data-theme="dark"] #popular-books-container.list-view tr:hover {
    background: rgba(255, 255, 255, 0.05);
}

[data-theme="dark-blue"] #results-container.list-view tr:hover,
[data-theme="dark-blue"] #popular-books-container.list-view tr:hover {
    background: rgba(255, 255, 255, 0.05);
}

/* Cover zoom effect */
.cover-zoom-container {
    position: relative;
    display: inline-block;
}

.book-cover {
    transition: transform 0.2s ease-in-out;
    position: relative;
    z-index: 1;
}

/* Les images de couverture n'ont plus de zoom au survol */
.book-cover {
    cursor: pointer;
    transition: opacity 0.2s ease;
}

.book-cover:hover {
    opacity: 0.8;
}

/* Ensure zoom doesn't break layout */
#results-container.list-view td {
    position: relative;
    overflow: visible;
}

#results-container.list-view td:first-child {
    width: 80px; /* Fixed width for cover column */
}

/* Allow image to overflow container */
.cover-zoom-container {
    position: relative;
    overflow: visible;
}

/* Styles pour l'image zoomée animée */
.animated-zoom-image {
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.zoom-backdrop {
    transition: opacity 0.3s ease;
}

/* Grid View Styles (default) */
#results-container.grid-view {
    display: grid;
    grid-template-columns: repeat(1, minmax(0, 1fr));
}

@media (min-width: 640px) {
    #results-container.grid-view {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (min-width: 1024px) {
    #results-container.grid-view {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }
}

@media (min-width: 1280px) {
    #results-container.grid-view {
        grid-template-columns: repeat(5, minmax(0, 1fr)); /* 5 livres par ligne pour les grands écrans */
    }
}

/* Responsive adjustments for list view */
@media (max-width: 768px) {
    #results-container.list-view {
        font-size: 0.875rem;
    }
    
    #results-container.list-view th,
    #results-container.list-view td {
        padding: 0.5rem;
    }
    
    #results-container.list-view td:first-child {
        width: 60px;
    }
    
    .book-cover {
        width: 32px;
        height: 48px;
    }
    
    .book-cover:hover,
    .book-cover.zoomed {
        transform: scale(1.5);
    }
    
    /* Hide some columns on very small screens */
    #results-container.list-view th:nth-child(4),
    #results-container.list-view td:nth-child(4),
    #results-container.list-view th:nth-child(8),
    #results-container.list-view td:nth-child(8) {
        display: none;
    }
}

@media (max-width: 640px) {
    /* Hide more columns on very small screens */
    #results-container.list-view th:nth-child(5),
    #results-container.list-view td:nth-child(5),
    #results-container.list-view th:nth-child(6),
    #results-container.list-view td:nth-child(6) {
        display: none;
    }
    
    #results-container.list-view .flex.gap-2 {
        flex-direction: column;
        gap: 0.25rem;
    }
}

/* Enhanced zoom effect for dark themes */
[data-theme="dark"] .book-cover:hover,
[data-theme="dark-blue"] .book-cover:hover {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
}

/* Home Sections Styles */
.mini-book-card {
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease, opacity 0.2s ease;
}

.mini-book-card:hover {
    transform: translateY(-2px);
}

.mini-cover {
    transition: opacity 0.2s ease;
}

.mini-cover:hover {
    opacity: 0.9;
}

/* Line clamp utilities */
.line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
}

.line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

/* Home section headers */
#home-sections h2 {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Refresh button styling */
#refresh-recent, #refresh-popular {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.875rem;
    transition: all 0.2s ease;
}

#refresh-recent:hover, #refresh-popular:hover {
    background: var(--bg-hover);
}

/* Loading states for home sections */
#recent-downloads-loading, #popular-books-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
}

/* Responsive adjustments for home sections */
@media (max-width: 640px) {
    #recent-downloads-grid, #popular-books-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 0.75rem;
    }
    
    .mini-book-card h4 {
        font-size: 0.75rem;
    }
    
    .mini-book-card p {
        font-size: 0.625rem;
    }
}

@media (max-width: 480px) {
    #recent-downloads-grid, #popular-books-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

/* Animations for status messages */
@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideUp {
    from {
        opacity: 1;
        transform: translateY(0);
    }
    to {
        opacity: 0;
        transform: translateY(-10px);
    }
}

/* Smooth transitions for table rows */
#results-container.list-view tr {
    transition: background-color 0.2s ease;
}

/* Better focus styles for accessibility */
#results-container.list-view button:focus {
    outline: 2px solid var(--primary-color, #0073e6);
    outline-offset: 2px;
}

/* Loading state for table */
#results-container.list-view.loading tbody::after {
    content: "Loading...";
    display: table-cell;
    text-align: center;
    padding: 2rem;
    opacity: 0.7;
}

/* Theme-specific overrides for view toggle buttons */
[data-theme="light"] .view-toggle:hover {
    background: rgba(0, 0, 0, 0.05);
}

[data-theme="dark"] .view-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

[data-theme="dark-blue"] .view-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Dark Blue theme specific enhancements */
[data-theme="dark-blue"] #view-toggle-container {
    background: var(--card-background) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
}

[data-theme="dark-blue"] #results-container.list-view article {
    background: var(--card-background) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
    transition: all 0.3s ease !important;
}

[data-theme="dark-blue"] #results-container.list-view article:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3) !important;
    border-color: rgba(255, 255, 255, 0.2) !important;
}

/* ===== MATERIAL DESIGN SIDEBAR ===== */
.main-container {
    display: flex;
    min-height: 100vh;
    position: relative;
}

/* Header Logo Container - aligné à gauche comme la sidebar */
.header-logo-container {
    position: absolute;
    left: 8px; /* Aligné à gauche avec le même margin que les sidebar-items */
    display: flex;
    align-items: center;
    transition: left 0.3s ease;
    z-index: 10;
    padding: 2px 0; /* Ajout du même margin vertical que les sidebar-items */
}

.header-logo {
    width: 24px; /* Même taille que les sidebar-icons */
    height: 24px; /* Même taille que les sidebar-icons */
    flex-shrink: 0;
}

.header-title {
    font-size: 18px; /* Augmenté de 14px à 18px pour une meilleure visibilité */
    font-weight: 500; /* Légèrement plus gras pour mieux ressortir */
    color: var(--header-text);
    white-space: nowrap;
    transition: color 0.2s ease;
    margin: 0;
}

/* S'assurer que le lien du logo est bien cliquable */
.header-logo-container a {
    display: flex;
    align-items: center;
    gap: 16px; /* Même espacement que les sidebar-links */
    padding: 12px 16px; /* Même padding que les sidebar-links */
    text-decoration: none;
    color: inherit;
    border-radius: 8px; /* Même border-radius que les sidebar-links */
    position: relative;
    overflow: hidden;
    transition: all 0.2s ease;
}

/* Effet hover pour le logo */
.header-logo-container a:hover {
    background-color: rgba(0, 0, 0, 0.04); /* Même hover-bg que la sidebar */
}

/* Effet hover spécifique pour les thèmes */
[data-theme="dark"] .header-logo-container a:hover {
    background-color: rgba(255, 255, 255, 0.08); /* Même hover-bg que la sidebar en dark */
}

[data-theme="dark-blue"] .header-logo-container a:hover {
    background-color: rgba(255, 255, 255, 0.08); /* Même hover-bg que la sidebar en dark-blue */
}

/* Sidebar Navigation */
.sidebar {
    position: fixed;
    top: 64px; /* Positionné sous la topbar */
    left: 0;
    width: var(--sidebar-width);
    height: calc(100vh - 64px); /* Hauteur adaptée à l'espace restant */
    background: var(--sidebar-bg);
    border-right: 1px solid var(--border-muted);
    box-shadow: var(--sidebar-elevation);
    z-index: var(--z-sidebar);
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    padding-top: 0; /* Supprimer le padding supérieur car le header a été supprimé */
}

/* Sidebar Navigation */
.sidebar-nav {
    padding: 8px 0;
    flex: 1;
}

.sidebar-item {
    position: relative;
    margin: 2px 8px;
    border-radius: 8px;
    transition: background-color 0.2s ease;
}

.sidebar-item:hover {
    background-color: var(--sidebar-hover-bg);
}

.sidebar-item.active {
    background-color: var(--sidebar-active-bg);
}

.sidebar-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 24px;
    background-color: var(--sidebar-active-text);
    border-radius: 0 2px 2px 0;
}

.sidebar-link {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 12px 16px;
    color: var(--sidebar-text);
    text-decoration: none;
    font-size: 14px;
    font-weight: 400;
    border-radius: 8px;
    position: relative;
    overflow: hidden;
    transition: all 0.2s ease;
}

.sidebar-item.active .sidebar-link {
    color: var(--sidebar-active-text);
    font-weight: 500;
}

/* Ripple Effect */
.sidebar-link::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(0, 115, 230, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.sidebar-link:active::before {
    width: 300px;
    height: 300px;
}

/* Sidebar Icons */
.sidebar-icon {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    color: var(--sidebar-text-secondary);
    transition: color 0.2s ease;
}

.sidebar-item.active .sidebar-icon {
    color: var(--sidebar-active-text);
}

/* Sidebar Text */
.sidebar-text {
    white-space: nowrap;
    opacity: 1;
    transition: opacity 0.3s ease;
}

/* Tooltip for collapsed sidebar */
.sidebar-item {
    position: relative;
}

.sidebar-tooltip {
    position: absolute;
    left: calc(100% + 8px);
    top: 50%;
    transform: translateY(-50%);
    background: #333;
    color: white;
    padding: 6px 12px;
    border-radius: 4px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    z-index: 1000;
}

.sidebar-tooltip::before {
    content: '';
    position: absolute;
    right: 100%;
    top: 50%;
    transform: translateY(-50%);
    border: 4px solid transparent;
    border-right-color: #333;
}

/* Sidebar Footer */
.sidebar-footer {
    margin-top: auto;
    padding: 16px;
    border-top: 1px solid var(--border-muted);
}

.sidebar-footer-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.sidebar-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.sidebar-version, .sidebar-env {
    font-size: 12px;
    color: var(--sidebar-text-secondary);
    margin: 0;
}

.sidebar-github-link {
    align-self: flex-start;
    color: var(--sidebar-text-secondary);
    transition: color 0.2s ease;
}

.sidebar-github-link:hover {
    color: var(--sidebar-active-text);
}

/* Main Content Area */
.main-content {
    margin-left: var(--sidebar-width);
    flex: 1;
    min-height: calc(100vh - 64px); /* Hauteur adaptée à l'espace restant */
    display: flex;
    flex-direction: column;
}

/* Dark Theme Sidebar */
[data-theme="dark"] .sidebar {
    --sidebar-bg: #1e1e1e;
    --sidebar-text: #ffffff;
    --sidebar-text-secondary: #b3b3b3;
    --sidebar-border: #404040;
    --sidebar-hover-bg: rgba(255, 255, 255, 0.08);
    --sidebar-active-bg: rgba(0, 115, 230, 0.16);
    --sidebar-active-text: #4dabf7;
}

/* Dark Blue Theme Sidebar */
[data-theme="dark-blue"] .sidebar {
    --sidebar-bg: rgba(13, 27, 42, 0.95);
    --sidebar-text: #ffffff;
    --sidebar-text-secondary: #b3b3b3;
    --sidebar-border: rgba(255, 255, 255, 0.1);
    --sidebar-hover-bg: rgba(255, 255, 255, 0.08);
    --sidebar-active-bg: rgba(0, 115, 230, 0.16);
    --sidebar-active-text: #4dabf7;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-right: 1px solid rgba(255, 255, 255, 0.1); /* Bordure unifiée avec la topbar */
}

/* Uniformiser les bordures pour le thème dark blue */
[data-theme="dark-blue"] header {
    border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Bordure unifiée avec le sidebar */
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .sidebar {
        width: var(--sidebar-width);
        transform: translateX(-100%);
        top: 64px; /* Conserver le positionnement sous la topbar sur mobile */
        height: calc(100vh - 64px); /* Hauteur adaptée sur mobile */
    }
    
    .sidebar.mobile-open {
        transform: translateX(0);
    }
    
    .main-content {
        margin-left: 0;
        min-height: calc(100vh - 64px); /* Hauteur adaptée sur mobile */
        height: auto; /* Permettre au contenu de déterminer la hauteur */
    }
    
    /* Mobile Menu Button */
    .mobile-menu-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: transparent;
        border: none;
        cursor: pointer;
        color: var(--header-text);
    }
    
    /* Ajuster le logo pour mobile */
    .header-logo-container {
        position: relative; /* Garder le positionnement mais ajusté pour mobile */
        left: 0;
        margin-left: 8px; /* Aligné avec les sidebar-items sur mobile */
        padding: 2px 0; /* Conserver le même padding vertical */
    }
    
    .header-logo-container a {
        padding: 12px 16px; /* Conserver le même padding que les sidebar-links */
    }
    
    .header-title {
        font-size: 16px; /* Légèrement plus petit que sur desktop mais plus grand que 14px */
    }
}

/* Tablet Responsive */
@media (min-width: 769px) and (max-width: 1024px) {
    .header-logo-container {
        left: 8px; /* Aligné à gauche comme la sidebar sur tablettes */
    }
}

@media (min-width: 769px) {
    .mobile-menu-btn {
        display: none;
    }
}

/* Overlay for mobile */
.mobile-overlay {
    position: fixed;
    top: 64px; /* Commence sous la topbar */
    left: 0;
    width: 100%;
    height: calc(100% - 64px); /* S'adapte à l'espace restant */
    background: rgba(0, 0, 0, 0.5);
    z-index: var(--z-overlay);
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.mobile-overlay.active {
    opacity: 1;
    visibility: visible;
}

/* Page Content Animation */
.page-content {
    animation: fadeInUp 0.4s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Loading State for Page Content */
.page-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 400px;
    color: var(--sidebar-text-secondary);
}

.page-loading::after {
    content: '';
    width: 32px;
    height: 32px;
    border: 3px solid var(--border-muted);
    border-top-color: var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-left: 12px;
}

/* Popular Books Grid - 5 livres par ligne */
#popular-books-container {
    display: grid;
    grid-template-columns: repeat(1, minmax(0, 1fr));
    gap: 1rem;
}

@media (min-width: 640px) {
    #popular-books-container {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }
}

@media (min-width: 1024px) {
    #popular-books-container {
        grid-template-columns: repeat(3, minmax(0, 1fr));
    }
}

@media (min-width: 1280px) {
    #popular-books-container {
        grid-template-columns: repeat(5, minmax(0, 1fr)); /* 5 livres par ligne pour les grands écrans */
    }
}

/* Ajuster la taille des cartes pour 5 par ligne */
#popular-books-container article.rounded.border.p-3 {
    max-width: 100%;
    overflow: hidden;
}

@media (min-width: 1280px) {
    #popular-books-container .mini-book-card h4 {
        font-size: 0.8rem;
        line-height: 1.2;
    }
    
    #popular-books-container .mini-book-card p {
        font-size: 0.7rem;
    }
    
    #popular-books-container .mini-cover {
        height: 120px; /* Réduire la hauteur pour 5 par ligne */
    }
}

/* Styles pour masquer les conteneurs vides et éviter le cadre bleu */
.empty-container {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    min-height: 0 !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    overflow: hidden !important;
}

/* Conteneurs de résultats spécifiques */
#results-container.empty-container,
#popular-books-container.empty-container {
    /* Masquer complètement le conteneur lorsqu'il est vide */
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Conteneurs de chargement */
#search-loading.hidden,
#popular-books-loading.hidden {
    display: none !important;
}

/* Messages "no results" */
#no-results.hidden,
#no-popular-books.hidden {
    display: none !important;
}

/* S'assurer que les conteneurs avec des éléments sont bien visibles */
#results-container:not(.empty-container),
#popular-books-container:not(.empty-container) {
    display: block !important;
    visibility: visible !important;
}

/* Pour les vues grille */
#results-container.grid-view:not(.empty-container),
#popular-books-container.grid-view:not(.empty-container) {
    display: grid !important;
}

/* Pour les vues liste */
#results-container.list-view:not(.empty-container),
#popular-books-container.list-view:not(.empty-container) {
    display: block !important;
}

/* Styles pour les éléments optimistes en cours de suppression */
.optimistic-item.removing,
[data-optimistic-id].removing {
    opacity: 0 !important;
    transform: scale(0.95) !important;
    pointer-events: none !important;
    transition: all 0.2s ease-out !important;
}

/* Animation de disparition pour les éléments optimistes */
@keyframes fadeOut {
    from {
        opacity: 0.7;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.95);
    }
}

.optimistic-item.fade-out,
[data-optimistic-id].fade-out {
    animation: fadeOut 0.2s ease-out forwards;
}

/* Conteneur de résultats avec état de chargement */
#results-container.loading,
#popular-books-container.loading {
    min-height: 200px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Messages d'erreur pour les conteneurs vides */
#results-container.empty-error,
#popular-books-container.empty-error {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    color: var(--text-color);
    opacity: 0.7;
    font-style: italic;
}

/* Amélioration de l'affichage des messages "no results" */
#no-results:not(.hidden),
#no-popular-books:not(.hidden) {
    padding: 2rem;
    text-align: center;
    color: var(--text-color);
    opacity: 0.8;
    background: var(--bg-soft);
    border-radius: 8px;
    margin: 1rem 0;
}

/* Masquer les bordures indésirables sur les conteneurs vides */
.empty-container * {
    border: none !important;
    box-shadow: none !important;
}

/* S'assurer que les conteneurs vides n'affectent pas la mise en page */
.empty-container:after {
    content: '' !important;
    display: none !important;
}

/* Supprimer la scrollbar quand elle n'est pas nécessaire */
.page-content {
    overflow-y: auto;
    /* S'assurer que la hauteur s'adapte au contenu */
    height: auto;
    min-height: 0;
}

/* Pages spécifiques - ajustement pour éviter la scrollbar inutile */
#home-page, #search-page, #popular-page, #admin-page {
    height: auto;
    min-height: 0;
    overflow-y: visible;
}

/* Conteneur principal pour s'adapter au contenu */
#page-content {
    height: auto;
    min-height: 0;
    overflow-y: visible;
}

/* Conteneurs de résultats - n'afficher la scrollbar que si nécessaire */
#results-container, #popular-books-container, #home-sections {
    height: auto;
    min-height: 0;
    overflow-y: visible;
}

/* Sections de recherche */
#search-section, #active-downloads-top {
    height: auto;
    min-height: 0;
    overflow-y: visible;
}

/* S'assurer que le contenu peut déborder si nécessaire pour la scrollbar */
#results-container.list-view, #popular-books-container.list-view {
    overflow-y: auto;
    max-height: none; /* Pas de hauteur maximale fixe */
}

/* Pour les vues grille, permettre au contenu de s'adapter */
#results-container.grid-view, #popular-books-container.grid-view {
    height: auto;
    overflow-y: visible;
}

/* Cacher la scrollbar par défaut et l'afficher uniquement au survol/scroll */
.page-content::-webkit-scrollbar {
    width: 0px;
    background: transparent;
}

.page-content:hover::-webkit-scrollbar {
    width: 8px;
}

.page-content::-webkit-scrollbar-track {
    background: var(--bg-soft);
}

.page-content::-webkit-scrollbar-thumb {
    background: var(--border-muted);
    border-radius: 4px;
}

.page-content::-webkit-scrollbar-thumb:hover {
    background: var(--sidebar-text-secondary);
}

/* Pour Firefox */
.page-content {
    scrollbar-width: thin;
    scrollbar-color: var(--border-muted) var(--bg-soft);
}

/* Cacher la scrollbar par défaut dans Firefox */
@media (hover: hover) {
    .page-content {
        scrollbar-width: none;
    }
    
    .page-content:hover {
        scrollbar-width: thin;
    }
}

/* ===== ADMIN PAGE STYLES ===== */

/* Admin Tabs Navigation */
.admin-tab-button {
    position: relative;
    padding: 0.5rem 1rem;
    margin-bottom: -1px;
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    color: var(--text);
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.admin-tab-button:hover {
    color: var(--primary-color);
    border-bottom-color: var(--border-muted);
}

.admin-tab-button.active,
.admin-tab-button[style*="border-color: var(--primary-color)"] {
    color: var(--primary-color);
    border-bottom-color: var(--primary-color);
}

/* Admin Tab Content */
.admin-tab-content {
    display: block;
    animation: fadeIn 0.3s ease-in-out;
}

.admin-tab-content.hidden {
    display: none;
}

/* Admin Form Styles */
.admin-tab-content .rounded-lg {
    border-radius: 0.5rem;
    overflow: hidden;
}

.admin-tab-content h2 {
    color: var(--heading-color);
    font-size: 1.125rem;
    font-weight: 600;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-muted);
}

/* Admin Form Inputs */
.admin-tab-content input[type="text"],
.admin-tab-content input[type="number"],
.admin-tab-content input[type="password"],
.admin-tab-content select {
    width: 100%;
    padding: 0.5rem 0.75rem;
    border: 1px solid var(--border-muted);
    border-radius: 0.375rem;
    background: var(--bg-soft);
    color: var(--text);
    font-size: 0.875rem;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.admin-tab-content input:focus,
.admin-tab-content select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(0, 115, 230, 0.1);
}

.admin-tab-content input:disabled,
.admin-tab-content input[readonly] {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Admin Form Labels */
.admin-tab-content label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text);
    font-weight: 500;
    font-size: 0.875rem;
}

/* Admin Checkboxes */
.admin-tab-content input[type="checkbox"] {
    width: 1rem;
    height: 1rem;
    margin-right: 0.5rem;
    accent-color: var(--primary-color);
}

.admin-tab-content .flex.items-center {
    margin-bottom: 0.5rem;
}

.admin-tab-content .text-xs {
    color: var(--text);
    opacity: 0.7;
    margin-top: 0.25rem;
    margin-left: 1.5rem;
}

/* Admin Buttons */
.admin-tab-content button {
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-muted);
    border-radius: 0.375rem;
    background: var(--bg-soft);
    color: var(--text);
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
}

.admin-tab-content button:hover {
    background: var(--table-hover-background);
    border-color: var(--border-color);
}

.admin-tab-content button.bg-blue-600 {
    background: var(--primary-color) !important;
    color: white !important;
    border-color: var(--primary-color) !important;
}

.admin-tab-content button.bg-blue-600:hover {
    background: var(--primary-dark) !important;
    border-color: var(--primary-dark) !important;
}

/* Admin Status Message */
#admin-status {
    position: fixed;
    bottom: 1rem;
    right: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 0.375rem;
    background: #10b981;
    color: white;
    font-size: 0.875rem;
    font-weight: 500;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    z-index: var(--z-dropdowns);
    animation: slideInRight 0.3s ease-out;
}

#admin-status.hidden {
    display: none;
}

@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* Admin Grid Layout */
.admin-tab-content .grid {
    gap: 1.5rem;
}

.admin-tab-content .md\\:col-span-2 {
    grid-column: span 1;
}

@media (min-width: 768px) {
    .admin-tab-content .md\\:col-span-2 {
        grid-column: span 2;
    }
}

/* Theme-specific admin styles */
[data-theme="dark"] .admin-tab-button:hover {
    color: #4dabf7;
    border-bottom-color: #404040;
}

[data-theme="dark"] .admin-tab-content input:focus,
[data-theme="dark"] .admin-tab-content select:focus {
    box-shadow: 0 0 0 3px rgba(77, 171, 247, 0.1);
}

[data-theme="dark-blue"] .admin-tab-button:hover {
    color: #93c5fd;
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

[data-theme="dark-blue"] .admin-tab-content input:focus,
[data-theme="dark-blue"] .admin-tab-content select:focus {
    box-shadow: 0 0 0 3px rgba(147, 197, 253, 0.1);
}

/* Responsive admin styles */
@media (max-width: 768px) {
    .admin-tab-button {
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
    }
    
    .admin-tab-content .grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .admin-tab-content .md\\:col-span-2 {
        grid-column: span 1;
    }
    
    #admin-status {
        bottom: 0.5rem;
        right: 0.5rem;
        left: 0.5rem;
        text-align: center;
    }
}
